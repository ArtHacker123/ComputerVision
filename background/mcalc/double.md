# 二重积分

### 二重积分表达式
```
∫∫f(x,y)dA
```

二重积分可以用来计算area, volumes, mass, work, moment of inertia等。

### 二重积分计算

1) 在计算过程中可以考虑变换积分的顺序

2) 在计算中可以考虑采用极坐标：
```
x=r*cos(theta)
y=r*sin(theta)
```
极坐标和直角坐标的变换，出了变量的替换外，dA=r*dr*d(theta),因为考虑一个小的扇面，dA约等于(∆r)*(r*∆theta)

3) 为了方便计算，有时会做变量替换

### 向量场

向量场中的每一个点对应着一个向量，可以表达很多场景，如力场，流体场，速度场等。

### 向量场的线积分

```
已知场F=Mi+Nj=<M,N>
曲线C: r(t)=x(t)i + y(t)j  => dr=<dx,dy>
那么线积分为 ∫Fdr=∫<M,N> * <dx, dy>=∫Mdx+Ndy
```
线积分表达了在某个力场，沿某个曲线路径所做的功。因为功等于力*距离，所以在微分状态下等于F*dr

在某些情况下，会有
```
因为有 dr/dt = T * ds/dt,位置的微分等于单位切线向量和曲线微分的乘积，
所以∫Fdr＝∫F*Tds
有时F*T的结果十分简单，这样在ds上做积分就简单了。
```

### 梯度场和守恒场

如果场是梯度场，那么任意两点的线积分与所走的路径无关。也就是说任意一段闭合曲线在梯度场的积分为0。

如果场是梯度场（即某个函数的梯度），那么充分必要地推出∫Fdr的计算是路径独立的，同时充分必要推出∫Fdr在闭合曲线上为0

对于2维的场F=<M,N>,如果∂M/∂y=∂N/∂x,同样可以推出该场是梯度场。

这里定义一个场F的旋度为curl(F)=∂N/∂x-∂M/∂y，如果旋度为0，那么该场是梯度场。

### 势能函数

对于一个梯度场F,我们可以求得每个点的势能函数f,对于任意两点x1,x2的线积分∫Fdr=f(x1)-f(x2)

求势能函数的两种方法：
```
def method1():
  # 可以计算原点到某个点的线积分＝f(x)-f(0)
  # 我们设定f(0)=某个常数c，这样f(x)＝线积分+c
def method2():
  # 由于M＝∂f/∂x，所以求∫Mdx的不定积分（会有一个未知的未知的参数项）
  # 将上面的不定积分对y求偏导，然后和N(=∂f/∂y)进行比较，将未知项补全，并求出未知项的不定积分。
```

### Exact Differentials/精确导数

对那些满足∂M/∂y=∂N/∂x的<M,N>，Mdx+Ndy这样的表达式被称为精确导数

### Green's Theorem/格林定理

对于一个曲线C，如果它是简单（无相交）且封闭的，某个区域R是C围住的内部区域，那么有在某个场内（不一定是梯度场）这个曲线的线积分等于场的旋度在R的二重积分。
```
∫Mdx+Ndy=∫∫curl(F)dA
```
如果curl(F)=0,说明该场是一个守恒场，那么封闭线积分为0，这与格林定理一致。

### Flux/通量

线积分可以想象成力场向量和切线单位向量点积在曲线上的积分，另外一类积分是力场向量和单位法向量在曲线上的积分：
```
∫F*Nds
```
通常来说，法向量是切线向量顺时针旋转90度的向量，那么
```
如果切线向量是(dx/ds, dy/ds),
法线向量是(dy/ds,-dx/ds),带入上面的公式，得
∫F*Nds=∫F*(dy/ds.-dx/ds)ds
      =∫[M * (dy/ds) - N * (dx/ds)]ds
      =∫Mdy-Ndx
      =∫[M*(dy/dt)-N*(dx/dt)]dt
```

这个积分叫做通量，它表示了单位时间场内的某种物质通过曲线的量。（比较抽象）

### Greens' Theorem on Flux/格林定理通量版
```
上面有：∫Mdx+Ndy=∫∫curl(F)dA
那么
∫F*Nds=∫Mdy-Ndx
      =∫-Ndx+Mdy
      =∫∫curl(-N,M)dA
      =∫∫(∂M/∂x+∂N/∂y)dA
```
其中div(F)=∂M/∂x+∂N/∂y，称为F的散度。
